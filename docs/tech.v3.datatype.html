<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>tech.v3.datatype documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">dtype-next</span> <span class="project-version">6.01-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="buffered-image.html"><div class="inner"><span>Buffered Image Support</span></div></a></li><li class="depth-1 "><a href="cheatsheet.html"><div class="inner"><span>Cheatsheet</span></div></a></li><li class="depth-1 "><a href="datatype-to-dtype-next.html"><div class="inner"><span>Why dtype-next?</span></div></a></li><li class="depth-1 "><a href="dimensions-bytecode-gen.html"><div class="inner"><span>Dimensions and Bytecode Generation</span></div></a></li><li class="depth-1 "><a href="overview.html"><div class="inner"><span>Overview</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tech</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>v3</span></div></div></li><li class="depth-3 current"><a href="tech.v3.datatype.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datatype</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.argops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>argops</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.bitmap.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bitmap</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.datetime.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datetime</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.errors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>errors</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.ffi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ffi</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.functional.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>functional</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.jna.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jna</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.list.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>list</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.mmap.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mmap</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.mmap-writer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mmap-writer</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.native-buffer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>native-buffer</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.nippy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nippy</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.packing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>packing</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.reductions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reductions</span></div></a></li><li class="depth-4"><a href="tech.v3.datatype.rolling.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rolling</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -486px;"><span class="top" style="height: 495px;"></span><span class="bottom"></span></span><span>libs</span></div></div></li><li class="depth-4 branch"><a href="tech.v3.libs.buffered-image.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>buffered-image</span></div></a></li><li class="depth-4"><a href="tech.v3.libs.neanderthal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>neanderthal</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>parallel</span></div></div></li><li class="depth-4"><a href="tech.v3.parallel.for.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>for</span></div></a></li><li class="depth-3"><a href="tech.v3.tensor.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>tensor</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.tensor.color-gradients.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color-gradients</span></div></a></li><li class="depth-4"><a href="tech.v3.tensor.dimensions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dimensions</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Earray"><div class="inner"><span>-&gt;array</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Earray-buffer"><div class="inner"><span>-&gt;array-buffer</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Ebuffer"><div class="inner"><span>-&gt;buffer</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Ebyte-array"><div class="inner"><span>-&gt;byte-array</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Echar-array"><div class="inner"><span>-&gt;char-array</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Edouble-array"><div class="inner"><span>-&gt;double-array</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Efloat-array"><div class="inner"><span>-&gt;float-array</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Eint-array"><div class="inner"><span>-&gt;int-array</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Eiterable"><div class="inner"><span>-&gt;iterable</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Elong-array"><div class="inner"><span>-&gt;long-array</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Enative-buffer"><div class="inner"><span>-&gt;native-buffer</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Ereader"><div class="inner"><span>-&gt;reader</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Eshort-array"><div class="inner"><span>-&gt;short-array</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Evector"><div class="inner"><span>-&gt;vector</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var--.3Ewriter"><div class="inner"><span>-&gt;writer</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-arg-type"><div class="inner"><span>arg-type</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-as-array-buffer"><div class="inner"><span>as-array-buffer</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-as-buffer"><div class="inner"><span>as-buffer</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-as-concrete-buffer"><div class="inner"><span>as-concrete-buffer</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-as-native-buffer"><div class="inner"><span>as-native-buffer</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-as-nd-buffer-descriptor"><div class="inner"><span>as-nd-buffer-descriptor</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-as-persistent-vector"><div class="inner"><span>as-persistent-vector</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-as-reader"><div class="inner"><span>as-reader</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-as-roaring-bitmap"><div class="inner"><span>as-roaring-bitmap</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-as-writer"><div class="inner"><span>as-writer</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-cast"><div class="inner"><span>cast</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-clone"><div class="inner"><span>clone</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-coalesce.21"><div class="inner"><span>coalesce!</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-coalesce-blocks.21"><div class="inner"><span>coalesce-blocks!</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-concat-buffers"><div class="inner"><span>concat-buffers</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-const-reader"><div class="inner"><span>const-reader</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-copy.21"><div class="inner"><span>copy!</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-copy-raw-.3Eitem.21"><div class="inner"><span>copy-raw-&gt;item!</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-datatype"><div class="inner"><span>datatype</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-ecount"><div class="inner"><span>ecount</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-elemwise-cast"><div class="inner"><span>elemwise-cast</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-elemwise-datatype"><div class="inner"><span>elemwise-datatype</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-emap"><div class="inner"><span>emap</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-ensure-reader"><div class="inner"><span>ensure-reader</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-ensure-serializeable"><div class="inner"><span>ensure-serializeable</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-get-datatype"><div class="inner"><span>get-datatype</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-get-value"><div class="inner"><span>get-value</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-indexed-buffer"><div class="inner"><span>indexed-buffer</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-iterable.3F"><div class="inner"><span>iterable?</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-make-container"><div class="inner"><span>make-container</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-make-list"><div class="inner"><span>make-list</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-make-reader"><div class="inner"><span>make-reader</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-reader-like.3F"><div class="inner"><span>reader-like?</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-reader.3F"><div class="inner"><span>reader?</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-set-constant.21"><div class="inner"><span>set-constant!</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-set-datatype"><div class="inner"><span>set-datatype</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-set-value.21"><div class="inner"><span>set-value!</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-shape"><div class="inner"><span>shape</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-sub-buffer"><div class="inner"><span>sub-buffer</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-unchecked-cast"><div class="inner"><span>unchecked-cast</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-vectorized-dispatch-1"><div class="inner"><span>vectorized-dispatch-1</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-vectorized-dispatch-2"><div class="inner"><span>vectorized-dispatch-2</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.html#var-writer.3F"><div class="inner"><span>writer?</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">tech.v3.datatype</h1><div class="doc"><div class="markdown"><p>Base namespace for container creation and elementwise access of data</p></div></div><div class="public anchor" id="var--.3Earray"><h3>-&gt;array</h3><div class="usage"><code>(-&gt;array datatype {:keys [nan-strategy], :or {nan-strategy :keep}, :as options} item)</code><code>(-&gt;array datatype item)</code><code>(-&gt;array item)</code></div><div class="doc"><div class="markdown"><p>Perform a NaN-aware conversion into an array. Default nan-strategy is :keep. Nan strategies can be: [:keep :remove :exception]</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/copy_make_container.clj#L149">view source</a></div></div><div class="public anchor" id="var--.3Earray-buffer"><h3>-&gt;array-buffer</h3><div class="usage"><code>(-&gt;array-buffer datatype {:keys [nan-strategy], :or {nan-strategy :keep}} item)</code><code>(-&gt;array-buffer datatype item)</code><code>(-&gt;array-buffer item)</code></div><div class="doc"><div class="markdown"><p>Perform a NaN-aware conversion into an array buffer. Default nan-strategy is :keep.</p>
<p>Nan strategies can be: [:keep :remove :exception]</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/copy_make_container.clj#L120">view source</a></div></div><div class="public anchor" id="var--.3Ebuffer"><h3>-&gt;buffer</h3><div class="usage"><code>(-&gt;buffer item)</code></div><div class="doc"><div class="markdown"><p>Convert this item to a buffer implementation or throw an exception.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L93">view source</a></div></div><div class="public anchor" id="var--.3Ebyte-array"><h3>-&gt;byte-array</h3><div class="usage"><code>(-&gt;byte-array data)</code></div><div class="doc"><div class="markdown"><p>Efficiently convert nearly anything into a byte array.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/copy_make_container.clj#L172">view source</a></div></div><div class="public anchor" id="var--.3Echar-array"><h3>-&gt;char-array</h3><div class="usage"><code>(-&gt;char-array data)</code></div><div class="doc"><div class="markdown"><p>Efficiently convert nearly anything into a char array.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/copy_make_container.clj#L182">view source</a></div></div><div class="public anchor" id="var--.3Edouble-array"><h3>-&gt;double-array</h3><div class="usage"><code>(-&gt;double-array options data)</code><code>(-&gt;double-array data)</code></div><div class="doc"><div class="markdown"><p>Nan-aware conversion to double array. See documentation for -&gt;array-buffer. Returns a double array. options -  * nan-strategy - :keep (default) :remove :exception</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/copy_make_container.clj#L209">view source</a></div></div><div class="public anchor" id="var--.3Efloat-array"><h3>-&gt;float-array</h3><div class="usage"><code>(-&gt;float-array options data)</code><code>(-&gt;float-array data)</code></div><div class="doc"><div class="markdown"><p>Nan-aware conversion to double array. See documentation for -&gt;array-buffer. Returns a double array. options -  * nan-strategy - :keep (default) :remove :exception</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/copy_make_container.clj#L198">view source</a></div></div><div class="public anchor" id="var--.3Eint-array"><h3>-&gt;int-array</h3><div class="usage"><code>(-&gt;int-array data)</code></div><div class="doc"><div class="markdown"><p>Efficiently convert nearly anything into a int array.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/copy_make_container.clj#L188">view source</a></div></div><div class="public anchor" id="var--.3Eiterable"><h3>-&gt;iterable</h3><div class="usage"><code>(-&gt;iterable item)</code></div><div class="doc"><div class="markdown"><p>Ensure this object is iterable. If item is iterable, return the item. If the item is convertible to a buffer object , convert to it and return the object. Else if the item is a scalar constant, return an infinite sequence of items.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L141">view source</a></div></div><div class="public anchor" id="var--.3Elong-array"><h3>-&gt;long-array</h3><div class="usage"><code>(-&gt;long-array data)</code></div><div class="doc"><div class="markdown"><p>Efficiently convert nearly anything into a long array.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/copy_make_container.clj#L193">view source</a></div></div><div class="public anchor" id="var--.3Enative-buffer"><h3>-&gt;native-buffer</h3><div class="usage"><code>(-&gt;native-buffer item)</code></div><div class="doc"><div class="markdown"><p>Convert to a native buffer if possible, else throw an exception. See as-native-buffer</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L245">view source</a></div></div><div class="public anchor" id="var--.3Ereader"><h3>-&gt;reader</h3><div class="usage"><code>(-&gt;reader item)</code><code>(-&gt;reader item read-datatype)</code></div><div class="doc"><div class="markdown"><p>If this object has a read-only or read-write conversion to a buffer object return the buffer object. Else throw an exception.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L121">view source</a></div></div><div class="public anchor" id="var--.3Eshort-array"><h3>-&gt;short-array</h3><div class="usage"><code>(-&gt;short-array data)</code></div><div class="doc"><div class="markdown"><p>Efficiently convert nearly anything into a short array.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/copy_make_container.clj#L177">view source</a></div></div><div class="public anchor" id="var--.3Evector"><h3>-&gt;vector</h3><div class="usage"><code>(-&gt;vector item)</code></div><div class="doc"><div class="markdown"><p>Copy a thing into a persistent vector.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype.clj#L225">view source</a></div></div><div class="public anchor" id="var--.3Ewriter"><h3>-&gt;writer</h3><div class="usage"><code>(-&gt;writer item)</code></div><div class="doc"><div class="markdown"><p>If this item is convertible to a PrimtiveIO writing the perform the conversion and return the interface. Else throw an excepion.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L195">view source</a></div></div><div class="public anchor" id="var-arg-type"><h3>arg-type</h3><div class="usage"><code>(arg-type arg)</code></div><div class="doc"><div class="markdown"><p>Return the type of a thing. Types could be: :scalar :iterable :reader :tensor (reader with more than 1 dimension)</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/argtypes.clj#L7">view source</a></div></div><div class="public anchor" id="var-as-array-buffer"><h3>as-array-buffer</h3><div class="usage"><code>(as-array-buffer item)</code></div><div class="doc"><div class="markdown"><p>If this item is convertible to a tech.v3.datatype.array_buffer.ArrayBuffer then convert it and return the typed buffer</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L225">view source</a></div></div><div class="public anchor" id="var-as-buffer"><h3>as-buffer</h3><div class="usage"><code>(as-buffer item)</code></div><div class="doc"><div class="markdown"><p>If this item is or has a conversion to an implementation of the Buffer interface then return the buffer interface for this object. Else return nil.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L81">view source</a></div></div><div class="public anchor" id="var-as-concrete-buffer"><h3>as-concrete-buffer</h3><div class="usage"><code>(as-concrete-buffer item)</code></div><div class="doc"><div class="markdown"><p>If this item is representable as a base buffer type, either native or array, return that buffer.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L255">view source</a></div></div><div class="public anchor" id="var-as-native-buffer"><h3>as-native-buffer</h3><div class="usage"><code>(as-native-buffer item)</code></div><div class="doc"><div class="markdown"><p>If this item is convertible to a tech.v3.datatype.native_buffer.NativeBuffer then convert it and return the typed buffer</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L235">view source</a></div></div><div class="public anchor" id="var-as-nd-buffer-descriptor"><h3>as-nd-buffer-descriptor</h3><div class="usage"><code>(as-nd-buffer-descriptor src-item)</code></div><div class="doc"><div class="markdown"><p>If this item is convertible to a buffer descriptor, convert it. Else return nil.</p>
<p>Buffer descriptors are a ND description of data. For example, a native 3x3 tensor has a buffer description like thus:</p>
<pre><code class="clojure">{:ptr 140330005614816
 :datatype :float64
 :endianness :little-endian
 :shape [3 3]
 :strides [24 8]}
</code></pre>
<p>This design allows zero-copy transfer between neanderthal, numpy, tvm, etc.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype.clj#L241">view source</a></div></div><div class="public anchor" id="var-as-persistent-vector"><h3>as-persistent-vector</h3><div class="usage"><code>(as-persistent-vector item)</code></div><div class="doc"><div class="markdown"><p>Return a reader wrapped in APersistentVector meaning you can use the reader as, for instance, keys in a map. Not recommended far large readers although the data is shared.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype.clj#L233">view source</a></div></div><div class="public anchor" id="var-as-reader"><h3>as-reader</h3><div class="usage"><code>(as-reader item)</code><code>(as-reader item read-datatype)</code></div><div class="doc"><div class="markdown"><p>If this object has a read-only or read-write conversion to a primitive io object return the buffer object.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L101">view source</a></div></div><div class="public anchor" id="var-as-roaring-bitmap"><h3>as-roaring-bitmap</h3><div class="usage"><code>(as-roaring-bitmap item)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype.clj#L220">view source</a></div></div><div class="public anchor" id="var-as-writer"><h3>as-writer</h3><div class="usage"><code>(as-writer item)</code></div><div class="doc"><div class="markdown"><p>If this item is convertible to a PrimtiveIO writing the perform the conversion and return the interface.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L183">view source</a></div></div><div class="public anchor" id="var-cast"><h3>cast</h3><div class="usage"><code>(cast value datatype)</code></div><div class="doc"><div class="markdown"><p>Perform a checked cast of a value to specific datatype.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/casting.clj#L457">view source</a></div></div><div class="public anchor" id="var-clone"><h3>clone</h3><div class="usage"><code>(clone item)</code></div><div class="doc"><div class="markdown"><p>Clone an object. Can clone anything convertible to a reader.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype.clj#L94">view source</a></div></div><div class="public anchor" id="var-coalesce.21"><h3>coalesce!</h3><div class="usage"><code>(coalesce! buffer raw-data)</code></div><div class="doc"><div class="markdown"><p>Coalesce data from a raw sequence of things into a contiguous buffer. Returns the buffer; uses the copy-raw-&gt;item! pathway.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype.clj#L200">view source</a></div></div><div class="public anchor" id="var-coalesce-blocks.21"><h3>coalesce-blocks!</h3><div class="usage"><code>(coalesce-blocks! dst src-seq)</code></div><div class="doc"><div class="markdown"><p>Copy a sequence of blocks of countable things into a larger countable thing.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype.clj#L207">view source</a></div></div><div class="public anchor" id="var-concat-buffers"><h3>concat-buffers</h3><div class="usage"><code>(concat-buffers datatype buffers)</code><code>(concat-buffers buffers)</code></div><div class="doc"><div class="markdown"><p>Concatenate a list of buffers into a single unified buffer. This shares the data and it works when the number of buffers is relatively small. The failure case for this is a large number of small buffers where it will be faster to simply copy all the data into a new buffer.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/io_concat_buffer.clj#L186">view source</a></div></div><div class="public anchor" id="var-const-reader"><h3>const-reader</h3><div class="usage"><code>(const-reader item n-elems)</code></div><div class="doc"><div class="markdown"><p>Create a new reader that only returns the item for the provided indexes.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/const_reader.clj#L18">view source</a></div></div><div class="public anchor" id="var-copy.21"><h3>copy!</h3><div class="usage"><code>(copy! src dst options)</code><code>(copy! src dst)</code></div><div class="doc"><div class="markdown"><p>Mutably copy values from a src container into a destination container. Returns the destination container.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/copy_make_container.clj#L14">view source</a></div></div><div class="public anchor" id="var-copy-raw-.3Eitem.21"><h3>copy-raw-&gt;item!</h3><div class="usage"><code>(copy-raw-&gt;item! raw-data buffer options)</code><code>(copy-raw-&gt;item! raw-data buffer)</code></div><div class="doc"><div class="markdown"><p>Copy raw data into a buffer. Data may be a sequence of numbers or a sequence of containers. Data will be coalesced into the buffer. Returns a tuple of: [buffer final-offset].</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype.clj#L190">view source</a></div></div><div class="public anchor" id="var-datatype"><h3>datatype</h3><div class="usage"><code>(datatype item)</code></div><div class="doc"><div class="markdown"><p>Return this object’s actual datatype.  <strong>This is not the same as the DEPRECATED get-datatype. That is function maps  to elemwise-datatype.</strong>  This maps to the parameterization of the object, so for instance a list of ints  might be:</p>
<pre><code class="clojure">  {:container-type :list :elemwise-datatype :int32}
</code></pre>
<p>Defaults to this object’s elemwise-datatype.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L37">view source</a></div></div><div class="public anchor" id="var-ecount"><h3>ecount</h3><div class="usage"><code>(ecount item)</code></div><div class="doc"><div class="markdown"><p>Return the long number of elements in the object.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L64">view source</a></div></div><div class="public anchor" id="var-elemwise-cast"><h3>elemwise-cast</h3><div class="usage"><code>(elemwise-cast item new-dtype)</code></div><div class="doc"><div class="markdown"><p>Create a new thing by doing a checked cast from the old values to the new values upon at read time. Return value will report new-dtype as it’s elemwise-datatype.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L53">view source</a></div></div><div class="public anchor" id="var-elemwise-datatype"><h3>elemwise-datatype</h3><div class="usage"><code>(elemwise-datatype item)</code></div><div class="doc"><div class="markdown"><p>Return the datatype one would expect when iterating through a container of this type. For scalars, return your elemental datatype.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L27">view source</a></div></div><div class="public anchor" id="var-emap"><h3>emap</h3><div class="usage"><code>(emap map-fn res-dtype &amp; args)</code></div><div class="doc"><div class="markdown"><p>Elemwise map:</p>
<ol>
  <li>If input are all scalars, results in a scalar.</li>
  <li>If any inputs are iterables, results in an iterable.</li>
  <li>Either a reader or a tensor is returned. All input shapes  have to match.</li>
</ol>
<p>res-dtype is nil it is deduced from unifying the argument datatypes</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/emap.clj#L97">view source</a></div></div><div class="public anchor" id="var-ensure-reader"><h3>ensure-reader</h3><div class="usage"><code>(ensure-reader item n-const-elems)</code><code>(ensure-reader item)</code></div><div class="doc"><div class="markdown"><p>Ensure item is randomly addressable. This may copy the data into a randomly accessible container.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/argops.clj#L42">view source</a></div></div><div class="public anchor" id="var-ensure-serializeable"><h3>ensure-serializeable</h3><div class="usage"><code>(ensure-serializeable item)</code></div><div class="doc"><div class="markdown"><p>Ensure this is an efficiently serializeable datatype object. For nippy support across buffers and tensors require <code>tech.v3.datatype.nippy</code>.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype.clj#L262">view source</a></div></div><div class="public anchor" id="var-get-datatype"><h3>get-datatype</h3><div class="usage"><code>(get-datatype item)</code></div><div class="doc"><div class="markdown"><p>Legacy method, returns elemwise-datatype</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype.clj#L82">view source</a></div></div><div class="public anchor" id="var-get-value"><h3>get-value</h3><div class="usage"><code>(get-value item idx)</code></div><div class="doc"><div class="markdown"><p>Get a value from an object via conversion to a reader.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L273">view source</a></div></div><div class="public anchor" id="var-indexed-buffer"><h3>indexed-buffer</h3><div class="usage"><code>(indexed-buffer indexes item)</code></div><div class="doc"><div class="markdown"><p>Create a new Buffer implementatino that indexes into a previous Buffer implementation via the provided indexes.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/io_indexed_buffer.clj#L12">view source</a></div></div><div class="public anchor" id="var-iterable.3F"><h3>iterable?</h3><div class="usage"><code>(iterable? item)</code></div><div class="doc"><div class="markdown"><p>Return true if this is either a instance of Iterable or an instance of java.util.streams.Stream.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L166">view source</a></div></div><div class="public anchor" id="var-make-container"><h3>make-container</h3><div class="usage"><code>(make-container container-type datatype options elem-seq-or-count)</code><code>(make-container container-type datatype elem-seq-or-count)</code><code>(make-container datatype elem-seq-or-count)</code><code>(make-container elem-seq-or-count)</code></div><div class="doc"><div class="markdown"><p>Make a container of a given datatype. Options are container specific and in general unused. Values will be copied into given container using the most efficient pathway possible.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/copy_make_container.clj#L100">view source</a></div></div><div class="public anchor" id="var-make-list"><h3>make-list</h3><div class="usage"><code>(make-list datatype n-elems-or-data)</code><code>(make-list datatype)</code></div><div class="doc"><div class="markdown"><p>Make an instance of a tech.v3.datatype.PrimitiveList. These have typed add* methods, implement tech.v3.datatype.Buffer, and a guaranteed in-place transformation to a concrete buffer (defaults to an array buffer).</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype.clj#L180">view source</a></div></div><div class="public anchor" id="var-make-reader"><h3>make-reader</h3><h4 class="type">macro</h4><div class="usage"><code>(make-reader datatype n-elems read-op)</code><code>(make-reader reader-datatype advertised-datatype n-elems read-op)</code></div><div class="doc"><div class="markdown"><p>Make a reader. Datatype must be a compile time visible object.  read-op has ‘idx’ in scope which is the index to read from. Returns a  reader of the appropriate type for the passed in datatype. Results are unchecked  casted to the appropriate datatype. It is up to <em>you</em> to ensure this is the result  you want or throw an exception.</p>
<p>This function creates a compile-time object that can allow maximum performance. For  most use cases this is probably overkill and ‘emap’ is a more ideal pathway that  matches Clojure constructs a bit closer.</p>
<p>reader-datatype must be a compile time constant but advertised datatype need not be.</p>
<p>user&gt; (dtype/make-reader :float32 5 idx) [0.0 1.0 2.0 3.0 4.0] user&gt; (dtype/make-reader :boolean 5 idx) [true true true true true] user&gt; (dtype/make-reader :boolean 5 (== idx 0)) [true false false false false] user&gt; (dtype/make-reader :float32 5 (* idx 2))  [0.0 2.0 4.0 6.0 8.0]</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype.clj#L101">view source</a></div></div><div class="public anchor" id="var-reader-like.3F"><h3>reader-like?</h3><div class="usage"><code>(reader-like? argtype)</code></div><div class="doc"><div class="markdown"><p>Returns true if this argument type is convertible to a reader.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/argtypes.clj#L32">view source</a></div></div><div class="public anchor" id="var-reader.3F"><h3>reader?</h3><div class="usage"><code>(reader? item)</code></div><div class="doc"><div class="markdown"><p>True if this item is convertible to a read-only or read-write Buffer interface.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L135">view source</a></div></div><div class="public anchor" id="var-set-constant.21"><h3>set-constant!</h3><div class="usage"><code>(set-constant! item offset length value)</code><code>(set-constant! item offset value)</code><code>(set-constant! item value)</code></div><div class="doc"><div class="markdown"><p>Set a contiguous region of a buffer to a constant value</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L761">view source</a></div></div><div class="public anchor" id="var-set-datatype"><h3>set-datatype</h3><div class="usage"><code>(set-datatype item new-dtype)</code></div><div class="doc"><div class="markdown"><p>Legacy method. Performs elemwise-cast.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype.clj#L88">view source</a></div></div><div class="public anchor" id="var-set-value.21"><h3>set-value!</h3><div class="usage"><code>(set-value! item idx value)</code></div><div class="doc"><div class="markdown"><p>Set a value on an object via conversion to a writer.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L279">view source</a></div></div><div class="public anchor" id="var-shape"><h3>shape</h3><div class="usage"><code>(shape item)</code></div><div class="doc"><div class="markdown"><p>Return a persistent vector of the shape of the object. Dimensions are returned from least-rapidly-changing to most-rapidly-changing.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L72">view source</a></div></div><div class="public anchor" id="var-sub-buffer"><h3>sub-buffer</h3><div class="usage"><code>(sub-buffer item offset length)</code><code>(sub-buffer item offset)</code></div><div class="doc"><div class="markdown"><p>Create a sub-buffer (view) of the given buffer.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L263">view source</a></div></div><div class="public anchor" id="var-unchecked-cast"><h3>unchecked-cast</h3><div class="usage"><code>(unchecked-cast value datatype)</code></div><div class="doc"><div class="markdown"><p>Perform an unchecked cast of a value to specific datatype.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/casting.clj#L463">view source</a></div></div><div class="public anchor" id="var-vectorized-dispatch-1"><h3>vectorized-dispatch-1</h3><div class="usage"><code>(vectorized-dispatch-1 scalar-fn iterable-fn reader-fn options arg1)</code><code>(vectorized-dispatch-1 scalar-fn iterable-fn reader-fn arg1)</code><code>(vectorized-dispatch-1 scalar-fn reader-fn arg1)</code></div><div class="doc"><div class="markdown"><p>Perform a vectorized dispatch meaning return a different object depending on the argument type of arg1. If arg1 is scalar, use scalar-fn. If arg1 is an iterable, use iterable-fn. Finally if arg1 is a reader, use reader-fn. The space the operation is to be performed in can be loosely set with :operation-space in the options. The actual space the operation will be performed in (and the return type of the system) is a combination of :operation-space if it exists and the elemwise datatype of arg1. See tech.v3.datatype.casting/widest-datatype for more information.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/dispatch.clj#L44">view source</a></div></div><div class="public anchor" id="var-vectorized-dispatch-2"><h3>vectorized-dispatch-2</h3><div class="usage"><code>(vectorized-dispatch-2 scalar-fn iterable-fn reader-fn options arg1 arg2)</code><code>(vectorized-dispatch-2 scalar-fn reader-fn arg1 arg2)</code></div><div class="doc"><div class="markdown"><p>Perform a vectorized dispatch meaning return a different object depending on the argument types of arg1 and arg2. If arg1 and arg2 are both scalar, use scalar-fn. If neither argument is a reader, use iterable-fn. Finally if both arguments are readers, use reader-fn. The space the operation is to be performed in can be loosely set with :operation-space in the options. The actual space the operation will be performed in (and the return type of the system) is a combination of :operation-space if it exists and the elemwise datatypes of arg1 and arg2. See tech.v3.datatype.casting/widest-datatype for more information.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/dispatch.clj#L106">view source</a></div></div><div class="public anchor" id="var-writer.3F"><h3>writer?</h3><div class="usage"><code>(writer? item)</code></div><div class="doc"><div class="markdown"><p>True if this item is convertible to a Buffer interface that supports writing.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L175">view source</a></div></div></div></body></html>