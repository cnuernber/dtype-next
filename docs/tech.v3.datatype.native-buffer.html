<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>tech.v3.datatype.native-buffer documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">dtype-next</span> <span class="project-version">6.01</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="buffered-image.html"><div class="inner"><span>Buffered Image Support</span></div></a></li><li class="depth-1 "><a href="cheatsheet.html"><div class="inner"><span>Cheatsheet</span></div></a></li><li class="depth-1 "><a href="datatype-to-dtype-next.html"><div class="inner"><span>Why dtype-next?</span></div></a></li><li class="depth-1 "><a href="dimensions-bytecode-gen.html"><div class="inner"><span>Dimensions and Bytecode Generation</span></div></a></li><li class="depth-1 "><a href="overview.html"><div class="inner"><span>Overview</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tech</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>v3</span></div></div></li><li class="depth-3"><a href="tech.v3.datatype.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datatype</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.argops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>argops</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.bitmap.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bitmap</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.datetime.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datetime</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.errors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>errors</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.ffi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ffi</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.functional.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>functional</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.jna.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jna</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.list.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>list</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.mmap.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mmap</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.mmap-writer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mmap-writer</span></div></a></li><li class="depth-4 branch current"><a href="tech.v3.datatype.native-buffer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>native-buffer</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.nippy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nippy</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.packing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>packing</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.reductions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reductions</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.rolling.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rolling</span></div></a></li><li class="depth-4"><a href="tech.v3.datatype.struct.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>struct</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -517px;"><span class="top" style="height: 526px;"></span><span class="bottom"></span></span><span>libs</span></div></div></li><li class="depth-4 branch"><a href="tech.v3.libs.buffered-image.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>buffered-image</span></div></a></li><li class="depth-4"><a href="tech.v3.libs.neanderthal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>neanderthal</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>parallel</span></div></div></li><li class="depth-4"><a href="tech.v3.parallel.for.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>for</span></div></a></li><li class="depth-3"><a href="tech.v3.tensor.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>tensor</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.tensor.color-gradients.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color-gradients</span></div></a></li><li class="depth-4"><a href="tech.v3.tensor.dimensions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dimensions</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-as-native-buffer"><div class="inner"><span>as-native-buffer</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-free"><div class="inner"><span>free</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-malloc"><div class="inner"><span>malloc</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-native-buffer-.3Emap"><div class="inner"><span>native-buffer-&gt;map</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-native-buffer-byte-len"><div class="inner"><span>native-buffer-byte-len</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-read-byte"><div class="inner"><span>read-byte</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-read-double"><div class="inner"><span>read-double</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-read-float"><div class="inner"><span>read-float</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-read-int"><div class="inner"><span>read-int</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-read-long"><div class="inner"><span>read-long</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-read-short"><div class="inner"><span>read-short</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-set-endianness"><div class="inner"><span>set-endianness</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-set-native-datatype"><div class="inner"><span>set-native-datatype</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-unsafe"><div class="inner"><span>unsafe</span></div></a></li><li class="depth-1"><a href="tech.v3.datatype.native-buffer.html#var-wrap-address"><div class="inner"><span>wrap-address</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">tech.v3.datatype.native-buffer</h1><div class="doc"><div class="markdown"><p>Support for malloc/free and generalized support for reading/writing typed data to a long integer address of memory.</p></div></div><div class="public anchor" id="var-as-native-buffer"><h3>as-native-buffer</h3><div class="usage"><code>(as-native-buffer item)</code></div><div class="doc"><div class="markdown"><p>Convert a thing to a native buffer if possible. Calls tech.v3.datatype.protocols/-&gt;native-buffer if object indicates it is convertible to a native buffer.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L532">view source</a></div></div><div class="public anchor" id="var-free"><h3>free</h3><div class="usage"><code>(free data)</code></div><div class="doc"><div class="markdown"><p>Free a long ptr. Malloc will do this for you. Calling this is probably a mistake.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L653">view source</a></div></div><div class="public anchor" id="var-malloc"><h3>malloc</h3><div class="usage"><code>(malloc n-bytes {:keys [resource-type uninitialized? endianness log-level], :or {resource-type :gc}})</code><code>(malloc n-bytes)</code></div><div class="doc"><div class="markdown"><p>Malloc memory. If a desired buffer type is needed follow up with set-native-datatype.</p>
<p>Options:</p>
<ul>
  <li><code>:resource-type</code> - defaults to <code>:gc</code> - maps to <code>:track-type</code> in <code>tech.v3.resource</code>  but can also be set to nil in which case the data is not tracked this library will  not clean it up.</li>
  <li><code>:uninitialized?</code> - do not initialize to zero. Use for perf in very very rare cases.</li>
  <li><code>:endianness</code> - Either <code>:little-endian</code> or <code>:big-endian</code> - defaults to platform.</li>
  <li><code>:log-level</code> - one of <code>#{:debug :trace :info :warn :error :fatal}</code> or nil if no logging  is desired. When enabled allocations and frees will be logged in the same manner as  <code>tech.jna</code>.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L663">view source</a></div></div><div class="public anchor" id="var-native-buffer-.3Emap"><h3>native-buffer-&gt;map</h3><div class="usage"><code>(native-buffer-&gt;map buf)</code></div><div class="doc"><div class="markdown"><p>Convert a native buffer to simple hashmap for printing or logging purposes.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L575">view source</a></div></div><div class="public anchor" id="var-native-buffer-byte-len"><h3>native-buffer-byte-len</h3><div class="usage"><code>(native-buffer-byte-len nb)</code></div><div class="doc"><div class="markdown"><p>Get the length, in bytes, of a native buffer.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L541">view source</a></div></div><div class="public anchor" id="var-read-byte"><h3>read-byte</h3><div class="usage"><code>(read-byte native-buffer offset)</code><code>(read-byte native-buffer)</code></div><div class="doc"><div class="markdown"><p>Ad-hoc read a byte at a given offset from a native buffer.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L641">view source</a></div></div><div class="public anchor" id="var-read-double"><h3>read-double</h3><div class="usage"><code>(read-double native-buffer offset)</code><code>(read-double native-buffer)</code></div><div class="doc"><div class="markdown"><p>Ad-hoc read a double at a given offset from a native buffer. This method is not endian-aware.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L589">view source</a></div></div><div class="public anchor" id="var-read-float"><h3>read-float</h3><div class="usage"><code>(read-float native-buffer offset)</code><code>(read-float native-buffer)</code></div><div class="doc"><div class="markdown"><p>Ad-hoc read a float at a given offset from a native buffer. This method is not endian-aware.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L599">view source</a></div></div><div class="public anchor" id="var-read-int"><h3>read-int</h3><div class="usage"><code>(read-int native-buffer offset)</code><code>(read-int native-buffer)</code></div><div class="doc"><div class="markdown"><p>Ad-hoc read an integer at a given offset from a native buffer. This method is not endian-aware.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L619">view source</a></div></div><div class="public anchor" id="var-read-long"><h3>read-long</h3><div class="usage"><code>(read-long native-buffer offset)</code><code>(read-long native-buffer)</code></div><div class="doc"><div class="markdown"><p>Ad-hoc read a long at a given offset from a native buffer. This method is not endian-aware.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L609">view source</a></div></div><div class="public anchor" id="var-read-short"><h3>read-short</h3><div class="usage"><code>(read-short native-buffer offset)</code><code>(read-short native-buffer)</code></div><div class="doc"><div class="markdown"><p>Ad-hoc read a short at a given offset from a native buffer. This method is not endian-aware.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L629">view source</a></div></div><div class="public anchor" id="var-set-endianness"><h3>set-endianness</h3><div class="usage"><code>(set-endianness item endianness)</code></div><div class="doc"><div class="markdown"><p>Convert a native buffer to simple hashmap for printing or logging purposes.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L563">view source</a></div></div><div class="public anchor" id="var-set-native-datatype"><h3>set-native-datatype</h3><div class="usage"><code>(set-native-datatype item datatype)</code></div><div class="doc"><div class="markdown"><p>Set the datatype of a native buffer. n-elems will be recalculated.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L549">view source</a></div></div><div class="public anchor" id="var-unsafe"><h3>unsafe</h3><div class="usage"><code>(unsafe)</code></div><div class="doc"><div class="markdown"><p>Get access to an instance of sun.misc.Unsafe.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L28">view source</a></div></div><div class="public anchor" id="var-wrap-address"><h3>wrap-address</h3><div class="usage"><code>(wrap-address address n-bytes datatype endianness gc-obj)</code><code>(wrap-address address n-bytes gc-obj)</code></div><div class="doc"><div class="markdown"><p>Wrap a long interger address with a native buffer. gc-obj, if provided will be linked to the native buffer such that gc-obj will not be garbage collected before native buffer is garbage collected.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/native_buffer.clj#L704">view source</a></div></div></div></body></html>