<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>tech.v3.tensor documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">dtype-next</span> <span class="project-version">6.00-alpha-14</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="buffered-image.html"><div class="inner"><span>Buffered Image Support</span></div></a></li><li class="depth-1 "><a href="cheatsheet.html"><div class="inner"><span>Cheatsheet</span></div></a></li><li class="depth-1 "><a href="datatype-to-dtype-next.html"><div class="inner"><span>Why dtype-next?</span></div></a></li><li class="depth-1 "><a href="dimensions-bytecode-gen.html"><div class="inner"><span>Dimensions and Bytecode Generation</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tech</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>v3</span></div></div></li><li class="depth-3 branch"><a href="tech.v3.compute.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compute</span></div></a></li><li class="depth-3"><a href="tech.v3.datatype.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datatype</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.argops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>argops</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.bitmap.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bitmap</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.datetime.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datetime</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.errors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>errors</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.functional.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>functional</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.list.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>list</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.mmap.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mmap</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.native-buffer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>native-buffer</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.nippy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nippy</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.datatype.packing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>packing</span></div></a></li><li class="depth-4"><a href="tech.v3.datatype.reductions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reductions</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -362px;"><span class="top" style="height: 371px;"></span><span class="bottom"></span></span><span>libs</span></div></div></li><li class="depth-4 branch"><a href="tech.v3.libs.buffered-image.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>buffered-image</span></div></a></li><li class="depth-4"><a href="tech.v3.libs.neanderthal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>neanderthal</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>parallel</span></div></div></li><li class="depth-4"><a href="tech.v3.parallel.for.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>for</span></div></a></li><li class="depth-3 current"><a href="tech.v3.tensor.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>tensor</span></div></a></li><li class="depth-4 branch"><a href="tech.v3.tensor.color-gradients.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color-gradients</span></div></a></li><li class="depth-4"><a href="tech.v3.tensor.dimensions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dimensions</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="tech.v3.tensor.html#var--.3Ejvm"><div class="inner"><span>-&gt;jvm</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var--.3Etensor"><div class="inner"><span>-&gt;tensor</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-as-tensor"><div class="inner"><span>as-tensor</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-broadcast"><div class="inner"><span>broadcast</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-clone"><div class="inner"><span>clone</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-columns"><div class="inner"><span>columns</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-const-tensor"><div class="inner"><span>const-tensor</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-construct-tensor"><div class="inner"><span>construct-tensor</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-dimensions-dense.3F"><div class="inner"><span>dimensions-dense?</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-dims-suitable-for-desc.3F"><div class="inner"><span>dims-suitable-for-desc?</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-ensure-nd-buffer-descriptor"><div class="inner"><span>ensure-nd-buffer-descriptor</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-ensure-tensor"><div class="inner"><span>ensure-tensor</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-mget"><div class="inner"><span>mget</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-mset.21"><div class="inner"><span>mset!</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-nd-buffer-descriptor-.3Etensor"><div class="inner"><span>nd-buffer-descriptor-&gt;tensor</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-new-tensor"><div class="inner"><span>new-tensor</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-reshape"><div class="inner"><span>reshape</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-rotate"><div class="inner"><span>rotate</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-rows"><div class="inner"><span>rows</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-select"><div class="inner"><span>select</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-simple-dimensions.3F"><div class="inner"><span>simple-dimensions?</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-slice"><div class="inner"><span>slice</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-slice-right"><div class="inner"><span>slice-right</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-tensor-.3Ebuffer"><div class="inner"><span>tensor-&gt;buffer</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-tensor-.3Edimensions"><div class="inner"><span>tensor-&gt;dimensions</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-tensor-copy.21"><div class="inner"><span>tensor-copy!</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-tensor.3F"><div class="inner"><span>tensor?</span></div></a></li><li class="depth-1"><a href="tech.v3.tensor.html#var-transpose"><div class="inner"><span>transpose</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">tech.v3.tensor</h1><div class="doc"><div class="markdown"><p>ND bindings for the tech.v3.datatype system. A Tensor is conceptually just a tuple of a buffer and an index operator that is capable of converting indexes in ND space into a single long index into the buffer. Tensors implementent the tech.v3.datatype.NDBuffer interface and outside this file ND objects are expected to simply implement that interface.</p>
<p>This system relies heavily on the tech.v3.tensor.dimensions namespace to provide the optimized indexing operator from ND space to buffer space and back.</p></div></div><div class="public anchor" id="var--.3Ejvm"><h3>-&gt;jvm</h3><div class="usage"><code>(-&gt;jvm item &amp; {:keys [datatype base-storage], :or {base-storage :persistent-vector}})</code></div><div class="doc"><div class="markdown"><p>Conversion to storage that is efficient for the jvm. Base storage is either jvm-array or persistent-vector.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L480">view source</a></div></div><div class="public anchor" id="var--.3Etensor"><h3>-&gt;tensor</h3><div class="usage"><code>(-&gt;tensor data &amp; {:keys [datatype container-type], :as options})</code></div><div class="doc"><div class="markdown"><p>Convert some data into a tensor via copying the data. The datatype and container type can be specified. The datatype defaults to the datatype of the input data and container type defaults to jvm-heap.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L327">view source</a></div></div><div class="public anchor" id="var-as-tensor"><h3>as-tensor</h3><div class="usage"><code>(as-tensor data)</code></div><div class="doc"><div class="markdown"><p>Attempts an in-place conversion of this object to a tech.v3.datatype.NDBuffer interface. For a guaranteed conversion, use ensure-tensor.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L346">view source</a></div></div><div class="public anchor" id="var-broadcast"><h3>broadcast</h3><div class="usage"><code>(broadcast t new-shape)</code></div><div class="doc"><div class="markdown"><p>Broadcase an element into a new (larger) shape. The new shape’s dimension must be even multiples of the old shape’s dimensions. Elements are repeated.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L607">view source</a></div></div><div class="public anchor" id="var-clone"><h3>clone</h3><div class="usage"><code>(clone tens &amp; {:keys [datatype container-type]})</code></div><div class="doc"><div class="markdown"><p>Clone a tensor via copying the tensor into a new container. Datatype defaults to the datatype of the tensor and container-type defaults to :java-heap.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L468">view source</a></div></div><div class="public anchor" id="var-columns"><h3>columns</h3><div class="usage"><code>(columns src)</code></div><div class="doc"><div class="markdown"><p>Return the columns of the tensor in a randomly-addressable structure.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L460">view source</a></div></div><div class="public anchor" id="var-const-tensor"><h3>const-tensor</h3><div class="usage"><code>(const-tensor value shape)</code></div><div class="doc"><div class="markdown"><p>Construct a tensor from a value and a shape. Data is represented efficiently via a const-reader.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L369">view source</a></div></div><div class="public anchor" id="var-construct-tensor"><h3>construct-tensor</h3><div class="usage"><code>(construct-tensor buffer dimensions)</code></div><div class="doc"><div class="markdown"><p>Construct an implementation of tech.v3.datatype.NDBuffer from a buffer and a dimensions object. See dimensions/dimensions.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L278">view source</a></div></div><div class="public anchor" id="var-dimensions-dense.3F"><h3>dimensions-dense?</h3><div class="usage"><code>(dimensions-dense? tens)</code></div><div class="doc"><div class="markdown"><p>Returns true of the dimensions of a tensor are dense, meaning no gaps due to striding.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L445">view source</a></div></div><div class="public anchor" id="var-dims-suitable-for-desc.3F"><h3>dims-suitable-for-desc?</h3><div class="usage"><code>(dims-suitable-for-desc? item)</code></div><div class="doc"><div class="markdown"><p>Are the dimensions of this object suitable for use in a buffer description? breaks due to striding.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L320">view source</a></div></div><div class="public anchor" id="var-ensure-nd-buffer-descriptor"><h3>ensure-nd-buffer-descriptor</h3><div class="usage"><code>(ensure-nd-buffer-descriptor tens)</code></div><div class="doc"><div class="markdown"><p>Get a buffer descriptor from the tensor. This may copy the data. If you want to ensure sharing, use the protocol -&gt;nd-buffer-descriptor function.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L522">view source</a></div></div><div class="public anchor" id="var-ensure-tensor"><h3>ensure-tensor</h3><div class="usage"><code>(ensure-tensor item)</code></div><div class="doc"><div class="markdown"><p>Create an implementation of tech.v3.datatype.NDBuffer from an object. If possible, represent the data in-place.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L377">view source</a></div></div><div class="public anchor" id="var-mget"><h3>mget</h3><div class="usage"><code>(mget t x)</code><code>(mget t x y)</code><code>(mget t x y z)</code><code>(mget t x y z &amp; args)</code></div><div class="doc"><div class="markdown"><p>Get an item from an ND object. If fewer dimensions are specified than exist then the return value is a new tensor as a select operation is performed.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L638">view source</a></div></div><div class="public anchor" id="var-mset.21"><h3>mset!</h3><div class="usage"><code>(mset! t x value)</code><code>(mset! t x y value)</code><code>(mset! t x y z value)</code><code>(mset! t x y z w &amp; args)</code></div><div class="doc"><div class="markdown"><p>Set value(s) on an ND object. If fewer indexes are provided than dimension then a tensor assignment is done and value is expected to be the same shape as the subrect of the tensor as indexed by the provided dimensions. Returns t.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L658">view source</a></div></div><div class="public anchor" id="var-nd-buffer-descriptor-.3Etensor"><h3>nd-buffer-descriptor-&gt;tensor</h3><div class="usage"><code>(nd-buffer-descriptor-&gt;tensor {:keys [ptr elemwise-datatype shape strides], :as desc})</code></div><div class="doc"><div class="markdown"><p>Given a buffer descriptor, produce a tensor</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L533">view source</a></div></div><div class="public anchor" id="var-new-tensor"><h3>new-tensor</h3><div class="usage"><code>(new-tensor shape &amp; {:keys [datatype container-type], :as options})</code></div><div class="doc"><div class="markdown"><p>Create a new tensor with a given shape, datatype and container type. Datatype defaults to :float64 if not passed in while container-type defaults to java-heap.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L355">view source</a></div></div><div class="public anchor" id="var-reshape"><h3>reshape</h3><div class="usage"><code>(reshape t new-shape)</code></div><div class="doc"><div class="markdown"><p>Reshape this item into a new shape. For this to work, the tensor namespace must be required. Always returns a tensor.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L580">view source</a></div></div><div class="public anchor" id="var-rotate"><h3>rotate</h3><div class="usage"><code>(rotate t offset-vec)</code></div><div class="doc"><div class="markdown"><p>Rotate dimensions. Offset-vec must have same count as the rank of t. Elements of that dimension are rotated by the amount specified in the offset vector with 0 indicating no rotation.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L614">view source</a></div></div><div class="public anchor" id="var-rows"><h3>rows</h3><div class="usage"><code>(rows src)</code></div><div class="doc"><div class="markdown"><p>Return the rows of the tensor in a randomly-addressable structure.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L452">view source</a></div></div><div class="public anchor" id="var-select"><h3>select</h3><div class="usage"><code>(select t &amp; new-shape)</code></div><div class="doc"><div class="markdown"><p>Perform a subrect projection or selection Shape arguments may be readers, ranges, integers, or the keywords [:all :lla]. :all means take the entire dimension, :lla means reverse the dimension. Arguments are applied left to right and any missing arguments are assumed to be :all.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L589">view source</a></div></div><div class="public anchor" id="var-simple-dimensions.3F"><h3>simple-dimensions?</h3><div class="usage"><code>(simple-dimensions? item)</code></div><div class="doc"><div class="markdown"><p>Are the dimensions of this object simple meaning read in order with no breaks due to striding.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L313">view source</a></div></div><div class="public anchor" id="var-slice"><h3>slice</h3><div class="usage"><code>(slice t n-dims)</code></div><div class="doc"><div class="markdown"><p>Slice off Y leftmost dimensions returning a reader of objects. If all dimensions are sliced of then the reader reads actual elements, else it reads subrect tensors.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L622">view source</a></div></div><div class="public anchor" id="var-slice-right"><h3>slice-right</h3><div class="usage"><code>(slice-right t n-dims)</code></div><div class="doc"><div class="markdown"><p>Slice off Y rightmost dimensions returning a reader of objects. If all dimensions are sliced of then the reader reads actual elements, else it reads subrect tensors.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L630">view source</a></div></div><div class="public anchor" id="var-tensor-.3Ebuffer"><h3>tensor-&gt;buffer</h3><div class="usage"><code>(tensor-&gt;buffer item)</code></div><div class="doc"><div class="markdown"><p>Get the buffer from a tensor.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L297">view source</a></div></div><div class="public anchor" id="var-tensor-.3Edimensions"><h3>tensor-&gt;dimensions</h3><div class="usage"><code>(tensor-&gt;dimensions item)</code></div><div class="doc"><div class="markdown"><p>Get the dimensions object from a tensor.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L305">view source</a></div></div><div class="public anchor" id="var-tensor-copy.21"><h3>tensor-copy!</h3><div class="usage"><code>(tensor-copy! src dst options)</code><code>(tensor-copy! src dst)</code></div><div class="doc"><div class="markdown"><p>Specialized copy with optimized pathways for when tensors have regions of contiguous data. As an example consider a sub-image of a larger image. Each row can be copied contiguously into a new image but there are gaps between them.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L431">view source</a></div></div><div class="public anchor" id="var-tensor.3F"><h3>tensor?</h3><div class="usage"><code>(tensor? item)</code></div><div class="doc"><div class="markdown"><p>Returns true if this implements the tech.v3.datatype.NDBuffer interface.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/tensor.clj#L291">view source</a></div></div><div class="public anchor" id="var-transpose"><h3>transpose</h3><div class="usage"><code>(transpose t new-shape)</code></div><div class="doc"><div class="markdown"><p>In-place transpose an n-d object into a new shape. Returns a tensor.</p></div></div><div class="src-link"><a href="https://github.com/cnuernber/dtype-next/blob/master/src/tech/v3/datatype/base.clj#L600">view source</a></div></div></div></body></html>